name: Deploy to QA
on: [workflow_dispatch]
jobs:
  web-deploy:
    name: Deploy
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2.3.2
    
    - name: Upload Files Over SFTP
      run: |
        touch ~/.ssh/known_hosts
        ssh-keyscan -H ${{secrets.QA_SERVER_SSH}} > ~/.ssh/known_hosts
        cd $GITHUB_WORKSPACE
        sftp ${{ secrets.QA_SFTP_USERNAME }}@${{ secrets.QA_SFTP_URL }}
        ${{ secrets.QA_SFTP_PASSWORD }}
        put -r ./web-deploy/*
        exit